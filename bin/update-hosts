#!/usr/bin/env bash

SOURCE="https://raw.githubusercontent.com/StevenBlack/hosts/master/hosts"

cat <<- EOF
Updating /etc/hosts...

Use this file to prevent your computer from connecting to selected internet
hosts. This is an easy and effective way to protect you from many types of
spyware, reduces bandwidth use, blocks certain pop-up traps, prevents user
tracking by way of "web bugs" embedded in spam, provides partial protection to
IE from certain web-based exploits and blocks most advertising you would
otherwise be subjected to on the internet.

Source: $SOURCE
Homepage: https://github.com/StevenBlack/hosts
===============================================================================

EOF

# Download the list and update the hosts file
curl "$SOURCE" | sudo tee /etc/hosts > /dev/null

# Flush DNS cache
if [[ "$OSTYPE" == "darwin"* ]]; then
  sudo dscacheutil -flushcache; sudo killall -HUP mDNSResponder
fi

printf "\n%s\n" "Update completed and DNS cache flushed."
